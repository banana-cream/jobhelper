<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Jobseek - 求职辅助平台</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 引入Framer Motion -->
  <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.15.1/dist/framer-motion.min.js"></script>
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#007AFF', // iOS蓝
            secondary: '#34C759', // iOS绿
            warning: '#FF9500', // iOS橙
            danger: '#FF3B30', // iOS红
            dark: '#1C1C1E',
            'dark-gray': '#8E8E93',
            'light-gray': '#E5E5EA',
            'ultra-light': '#F5F5F7',
          },
          fontFamily: {
            'sf': ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
          },
          boxShadow: {
            'ios': '0 4px 14px 0 rgba(0, 0, 0, 0.1)',
            'ios-hover': '0 8px 28px 0 rgba(0, 0, 0, 0.15)',
          },
          animation: {
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .backdrop-blur-ios {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .text-balance {
        text-wrap: balance;
      }
      .ios-transition {
        transition: all 300ms ease-in-out;
      }
    }
  </style>
  
  <style>
    /* 基础样式 */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: #F5F5F7;
      color: #1C1C1E;
    }
    
    /* 自定义动画 */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    
    .animate-float {
      animation: float 2s ease-in-out infinite;
    }
    
    /* 平滑滚动 */
    html {
      scroll-behavior: smooth;
    }
    
    /* 状态下拉菜单样式 */
    .status-dropdown {
      max-height: 200px;
      overflow-y: auto;
    }
    
    .status-option:hover {
      background-color: #F5F5F7;
    }
    
    .status-option.bg-primary\/10 {
      background-color: rgba(0, 122, 255, 0.1);
      color: #007AFF;
    }
    
    /* 悬停菜单样式 */
    .position-group:hover .position-hover-menu {
      display: block !important;
    }
    
    .location-group:hover .location-hover-menu {
      display: block !important;
    }
    
    /* 选中状态的标签样式 */
    .position-tag.selected,
    .location-tag.selected {
      background-color: rgba(0, 122, 255, 0.1);
      color: #007AFF;
      border: 1px solid rgba(0, 122, 255, 0.3);
    }
    
    .location-tag.selected {
      background-color: rgba(52, 199, 89, 0.1);
      color: #34C759;
      border: 1px solid rgba(52, 199, 89, 0.3);
    }
    
    /* 表格内容样式 */
    .break-all {
      word-break: break-all;
      overflow-wrap: break-word;
    }
    
    /* 表格列宽度调整 */
    .grid-cols-8 > div:nth-child(1) { /* title */
      min-width: 200px;
      margin-left: 0cm; /* 向右移动0.3cm */
    }
    
    .grid-cols-8 > div:nth-child(2) { /* pubDate */
      min-width: 20px;
      margin-left: -0cm; /* 添加左边距，与表头对齐 */
    }
    
    .grid-cols-8 > div:nth-child(3) { /* company */
      min-width: 1px;
      margin-left: -3.0cm; /* 向左移动1.5cm */
      max-width: 9ch; /* 限制宽度为8个字符 */
      word-wrap: break-word; /* 允许长单词换行 */
      overflow-wrap: break-word; /* 现代浏览器的换行属性 */
    }
    
    .grid-cols-8 > div:nth-child(4) { /* industry */
      min-width: 1.5cm;
      margin-left: -4.7cm; /* 向左移动1.5cm */
    }
    
    .grid-cols-8 > div:nth-child(5) { /* base */
      min-width: 3.0cm;
      max-width: 25ch; /* 限制宽度为8个字符 */
      margin-left: -7.0cm; /* 向左移动1.5cm */
    }
    
    .grid-cols-8 > div:nth-child(6) { /* position */
      min-width: 140px;
      max-width: 1000ch; /* 限制宽度为8个字符 */
      margin-left: -4.2cm; /* 向左移动4.2cm */
    }
    
    /* 收藏列内容位置调整 - 使用更精确的选择器 */
    .grid-cols-8 > div:last-child { /* favorite */
      min-width: 5px; /* 减少到目前的一半 */
      max-width: 10ch; /* 减少到目前的一半 */
      display: flex;
      align-items: center;
      justify-content: center;
      transform: translateX(0cm); /* 强制向右移动2.5cm，与表头对齐 */
    }
    
    /* 折叠展开内容样式 */
    .collapsible-content {
      width: 100%;
    }
    
    .content-preview {
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }
    
    .content-full {
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }
    
    .expand-btn, .collapse-btn {
      flex-shrink: 0;
      width: 10px;
      height: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.6;
      border: none;
      background: transparent;
    }
  
    
    .expand-btn:hover {
      opacity: 0.8;
    }
    
    .collapse-btn:hover {
      opacity: 0.8;
    }
    
    /* iOS风格三角形图标 */
    .expand-btn::before {
      content: '';
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 6px solid #8E8E93; /* 倒三角，弱化颜色 */
    }
    
    .collapse-btn::before {
      content: '';
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 6px solid #8E8E93; /* 正三角，弱化颜色 */
    }
    
    .hidden {
      display: none !important;
    }
    
    /* 确保内容在单元格内正确显示 */
    .collapsible-content .text-dark {
      flex: 1;
      min-width: 0;
    }
    
    /* 限制折叠内容最多显示3行 */
    .content-preview .text-dark {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.4;
      max-height: calc(1.4em * 3);
    }
    
    /* 统一表格列间距设置 */
    :root {
      --table-column-gap: 0.2cm; /* 列与列之间的间距 */
    }
    
    /* 应用统一的列间距 */
    .table-grid {
      gap: var(--table-column-gap) !important;
      column-gap: var(--table-column-gap) !important;
    }
    
    /* 强制应用列间距到所有表格行 */
    .grid-cols-8.table-grid {
      gap: var(--table-column-gap) !important;
      column-gap: var(--table-column-gap) !important;
    }
    
    /* 确保表格头部和内容行都使用相同的间距 */
    .bg-ultra-light .table-grid,
    #jobs-table-body .table-grid {
      gap: var(--table-column-gap) !important;
      column-gap: var(--table-column-gap) !important;
    }
    
    /* 直接针对表格的列间距 */
    .grid.grid-cols-8 {
      column-gap: var(--table-column-gap) !important;
    }
    
    /* 使用margin强制控制列间距 */
    .grid-cols-8 > div:not(:last-child) {
      margin-right: var(--table-column-gap) !important;
    }
    
    /* 确保表格列有正确的宽度分配 */
    .grid-cols-8 {
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1.5fr 0.5fr !important;
    }
    
    /* 表头标题位置调整 */
    .bg-ultra-light .col-span-2 span:first-child {
      margin-left: 0.3cm; /* 公众号原文标题向右移动0.3cm */
    }
    
    /* 收藏列表头位置调整 */
    .bg-ultra-light .col-span-1:last-child span:first-child {
      margin-left: -0.3cm; /* 收藏表头向右移动3cm */
    }
    
    /* 日期表头位置调整 */
    .bg-ultra-light .col-span-2:nth-child(2) span:first-child {
      margin-left: -0.3cm; /* 日期表头向右移动0.5cm，与内容对齐 */
    }
    
    /* 收藏按钮样式调整 */
    .favorite-btn {
      width: 2px; /* 调整按钮宽度 */
      height: 2px; /* 调整按钮高度 */
      font-size: 2px; /* 调整心形图标大小 */
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .favorite-btn:hover {
      transform: scale(1.1); /* 悬停时放大效果 */
    }
    
    /* 职位标题链接样式 */
    .job-title-link {
      color: inherit;
      text-decoration: none;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    
    .job-title-link:hover {
      color: #007AFF !important;
      text-decoration: underline;
    }
    
    .job-title-link:focus {
      outline: 2px solid #007AFF;
      outline-offset: 2px;
      border-radius: 4px;
    }
  </style>
</head>

<body class="font-sf text-dark overflow-x-hidden">
  <!-- 导航栏 - 毛玻璃效果 -->
  <header id="navbar" class="fixed top-0 left-0 right-0 z-50 ios-transition bg-white/80 backdrop-blur-ios border-b border-light-gray/50">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center">
        <h1 class="text-[clamp(1.2rem,5vw,1.5rem)] font-semibold text-primary" style="margin-left: -1.4cm;">Jobseek</h1>
      </div>
      
      <div class="flex items-center gap-4">
        <!-- 自定义筛选区域 -->
        <div class="flex items-center gap-2">
          <input type="text" id="base-filter" placeholder="base筛选" class="px-3 py-2 text-sm border border-light-gray rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none w-32">
          <input type="text" id="position-filter" placeholder="岗位筛选" class="px-3 py-2 text-sm border border-light-gray rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none w-32">
          <button id="apply-custom-filter" class="px-3 py-2 bg-primary text-white text-sm rounded-lg ios-transition hover:bg-primary/90">
            <i class="fa fa-filter mr-1"></i>筛选
          </button>
          <button id="clear-custom-filter" class="px-2 py-2 bg-ultra-light text-dark text-sm rounded-lg ios-transition hover:bg-light-gray/30">
            <i class="fa fa-times"></i>
          </button>
        </div>
        <button id="search-btn" class="w-10 h-10 rounded-full flex items-center justify-center ios-transition hover:bg-ultra-light">
          <i class="fa fa-search text-dark-gray"></i>
        </button>
        <button id="profile-btn" class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center ios-transition hover:bg-primary/20">
          <i class="fa fa-user text-primary"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="pt-16 pb-20 min-h-screen">
    <!-- 页面容器 - 根据路由切换显示不同内容 -->
    <div id="page-container">
      <!-- 职位列表页面 (默认显示) -->
      <div id="jobs-page" class="page active">
        <!-- 职位表格 -->
        <div class="px-[0.8cm] pb-6">
          <div class="bg-white rounded-2xl shadow-ios overflow-hidden">
            <!-- 表格头部 -->
            <div class="bg-ultra-light border-b border-light-gray/50">
              <div class="grid grid-cols-8 table-grid px-1 py-4 text-sm font-medium text-dark-gray" style="column-gap: 0.2cm !important;">
                <div class="col-span-2 flex items-center gap-1">
                  <span>公众号原文</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-1">
                  <span>日期</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-0.5">
                  <span>公司</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-0.5">
                  <span>行业</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-0.5">
                  <span>base</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-1">
                  <span>岗位</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
                <div class="col-span-1 flex items-center gap-1">
                  <span>收藏</span>
                  <i class="fa fa-sort text-xs opacity-50"></i>
                </div>
              </div>
            </div>
            
            <!-- 表格内容 -->
            <div id="jobs-table-body" class="divide-y divide-light-gray/30">
              <!-- 动态加载的职位数据将在这里显示 -->
              

              </div>
              
            <!-- 表格底部 -->
            <div class="bg-ultra-light border-t border-light-gray/50 px-6 py-4">
              <div class="flex justify-end items-center">
                <div class="flex items-center gap-1">
                  <button class="prev-page px-3 py-1.5 bg-white border border-light-gray rounded-lg text-sm ios-transition hover:bg-ultra-light" onclick="goToPage(window.currentPageData ? window.currentPageData.currentPage - 1 : 1)">
                    <i class="fa fa-chevron-left mr-1"></i>上一页
                  </button>
                  <span class="pagination-info px-3 py-1.5 text-sm text-dark-gray">第 1 页，共 1 页</span>
                  <div class="flex items-center gap-1">
                    <span class="text-sm text-dark-gray">跳转到</span>
                    <input type="number" min="1" class="w-16 px-2 py-1 text-sm border border-light-gray rounded-lg text-center" id="page-input" placeholder="页码" onkeypress="handlePageInputKeypress(event)">
                    <button class="px-2 py-1 bg-primary text-white text-sm rounded-lg ios-transition hover:bg-primary/90" onclick="jumpToPage()">跳转</button>
                  </div>
                  <button class="next-page px-3 py-1.5 bg-white border border-light-gray rounded-lg text-sm ios-transition hover:bg-ultra-light" onclick="goToPage(window.currentPageData ? window.currentPageData.currentPage + 1 : 1)">
                    下一页<i class="fa fa-chevron-right ml-1"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 简历助手页面 -->
      <div id="resume-page" class="page hidden">
        <div class="container mx-auto px-4 py-6">
          <h2 class="text-xl font-semibold mb-6">简历助手</h2>
          
          <!-- 简历状态卡片 -->
          <div class="bg-white rounded-2xl shadow-ios p-5 mb-6">
            <div class="flex justify-between items-start mb-4">
              <div>
                <h3 class="font-semibold text-lg">我的简历</h3>
                <p class="text-dark-gray text-sm">上次编辑: 2小时前</p>
              </div>
              <span class="px-3 py-1 bg-secondary/10 text-secondary text-xs rounded-full">80% 完成</span>
            </div>
            
            <div class="w-full bg-ultra-light rounded-full h-2 mb-6">
              <div class="bg-secondary h-2 rounded-full" style="width: 80%"></div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <button class="flex items-center gap-2 px-4 py-3 bg-ultra-light rounded-xl ios-transition hover:bg-primary/10 hover:text-primary">
                <i class="fa fa-edit text-lg"></i>
                <span>编辑简历</span>
              </button>
              <button class="flex items-center gap-2 px-4 py-3 bg-ultra-light rounded-xl ios-transition hover:bg-primary/10 hover:text-primary">
                <i class="fa fa-eye text-lg"></i>
                <span>预览简历</span>
              </button>
              <button class="flex items-center gap-2 px-4 py-3 bg-ultra-light rounded-xl ios-transition hover:bg-primary/10 hover:text-primary">
                <i class="fa fa-magic text-lg"></i>
                <span>AI优化</span>
              </button>
            </div>
          </div>
          
          <!-- 双栏布局 - 编辑/预览 -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- 编辑区 -->
            <div class="lg:col-span-2 bg-white rounded-2xl shadow-ios p-5">
              <h3 class="font-semibold text-lg mb-4">编辑基本信息</h3>
              
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-dark-gray mb-1">姓名</label>
                  <input type="text" class="w-full px-4 py-2.5 rounded-xl border border-light-gray ios-transition focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none" placeholder="请输入您的姓名">
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-dark-gray mb-1">求职意向</label>
                  <input type="text" class="w-full px-4 py-2.5 rounded-xl border border-light-gray ios-transition focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none" placeholder="请输入您的求职意向">
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-dark-gray mb-1">工作经验</label>
                  <select class="w-full px-4 py-2.5 rounded-xl border border-light-gray ios-transition focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none appearance-none bg-white">
                    <option value="">请选择工作经验</option>
                    <option value="fresh">应届毕业生</option>
                    <option value="1-3">1-3年</option>
                    <option value="3-5">3-5年</option>
                    <option value="5+">5年以上</option>
                  </select>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-dark-gray mb-1">联系电话</label>
                  <input type="tel" class="w-full px-4 py-2.5 rounded-xl border border-light-gray ios-transition focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none" placeholder="请输入您的联系电话">
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-dark-gray mb-1">电子邮箱</label>
                  <input type="email" class="w-full px-4 py-2.5 rounded-xl border border-light-gray ios-transition focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none" placeholder="请输入您的电子邮箱">
                </div>
              </div>
              
              <div class="mt-6 pt-4 border-t border-light-gray/50">
                <button class="px-6 py-2.5 bg-primary text-white rounded-xl ios-transition hover:bg-primary/90">保存修改</button>
              </div>
            </div>
            
            <!-- 预览区 -->
            <div class="lg:col-span-1 bg-white rounded-2xl shadow-ios p-5">
              <div class="flex justify-between items-center mb-4">
                <h3 class="font-semibold text-lg">实时预览</h3>
                <button class="text-primary text-sm ios-transition hover:underline">全屏预览</button>
              </div>
              
              <div class="border border-light-gray rounded-xl p-4 bg-white/80 aspect-[3/4] overflow-auto">
                <div class="text-center mb-4">
                  <h4 class="text-lg font-semibold">张三</h4>
                  <p class="text-dark-gray text-sm">前端开发工程师 | 3年工作经验</p>
                </div>
                
                <div class="space-y-3 text-sm">
                  <div>
                    <h5 class="font-medium text-dark mb-1">联系方式</h5>
                    <p>电话: 138****6789</p>
                    <p>邮箱: example@company.com</p>
                  </div>
                  
                  <div>
                    <h5 class="font-medium text-dark mb-1">教育经历</h5>
                    <p>XX大学 | 计算机科学与技术 | 本科 (2016-2020)</p>
                  </div>
                  
                  <div>
                    <h5 class="font-medium text-dark mb-1">工作经历</h5>
                    <p class="font-medium">XX科技有限公司 | 前端开发工程师 (2020-至今)</p>
                    <p class="text-dark-gray mt-1">负责公司核心产品的前端开发与维护，使用React、Vue等技术栈...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 面经助手页面 -->
      <div id="interview-page" class="page hidden">
        <div class="container mx-auto px-4 py-6">
          <h2 class="text-xl font-semibold mb-6">面经助手</h2>
          
          <!-- 面经模式选择 -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="bg-white rounded-2xl shadow-ios p-5 border-2 border-primary ios-transition hover:shadow-ios-hover">
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                  <i class="fa fa-comments text-primary text-xl"></i>
                </div>
                <div>
                  <h3 class="font-semibold text-lg mb-1">模拟面试</h3>
                  <p class="text-dark-gray text-sm mb-3">根据意向岗位生成面试题，模拟真实面试场景</p>
                  <button class="text-primary text-sm font-medium ios-transition hover:underline">开始模拟 <i class="fa fa-arrow-right ml-1"></i></button>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-2xl shadow-ios p-5 border-2 border-transparent ios-transition hover:shadow-ios-hover hover:border-light-gray">
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 rounded-full bg-ultra-light flex items-center justify-center flex-shrink-0">
                  <i class="fa fa-book text-dark-gray text-xl"></i>
                </div>
                <div>
                  <h3 class="font-semibold text-lg mb-1">面经库</h3>
                  <p class="text-dark-gray text-sm mb-3">查看各公司真实面试经验和题目解析</p>
                  <button class="text-primary text-sm font-medium ios-transition hover:underline">浏览面经 <i class="fa fa-arrow-right ml-1"></i></button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 模拟面试区域 -->
          <div class="bg-white rounded-2xl shadow-ios p-5 mb-6">
            <div class="flex justify-between items-center mb-6">
              <div>
                <h3 class="font-semibold text-lg">正在进行: 前端开发工程师</h3>
                <p class="text-dark-gray text-sm">字节跳动 · 第3题 / 共10题</p>
              </div>
              <div class="w-12 h-12 rounded-full bg-ultra-light flex items-center justify-center">
                <i class="fa fa-pause text-dark-gray"></i>
              </div>
            </div>
            
            <!-- 进度条 -->
            <div class="w-full bg-ultra-light rounded-full h-2 mb-6">
              <div class="bg-primary h-2 rounded-full" style="width: 30%"></div>
            </div>
            
            <!-- 题目区域 -->
            <div class="mb-6">
              <h4 class="font-medium text-lg mb-4">请解释React中的虚拟DOM及其工作原理</h4>
              
              <!-- 答题区域 -->
              <div class="border border-light-gray rounded-xl p-4 min-h-[180px] mb-4 focus-within:border-primary ios-transition focus-within:ring-2 focus-within:ring-primary/20">
                <textarea 
                  placeholder="请输入您的答案..." 
                  class="w-full h-full resize-none outline-none"
                ></textarea>
              </div>
              
              <!-- 提示系统 -->
              <div class="space-y-3">
                <button class="w-full flex justify-between items-center px-4 py-2.5 bg-ultra-light rounded-xl ios-transition hover:bg-primary/5">
                  <span>查看提示</span>
                  <i class="fa fa-chevron-down text-xs text-dark-gray"></i>
                </button>
                
                <div class="hidden bg-ultra-light/50 rounded-xl p-4 space-y-3">
                  <div class="p-3 bg-white rounded-lg border border-light-gray">
                    <p class="text-sm font-medium mb-1">一级提示: 核心概念</p>
                    <p class="text-sm text-dark-gray">虚拟DOM是React中的一个内存中的DOM树表示，是真实DOM的轻量级副本。</p>
                  </div>
                  
                  <button class="w-full flex justify-between items-center px-4 py-2 bg-white border border-light-gray rounded-lg ios-transition hover:bg-ultra-light text-sm">
                    <span>查看二级提示</span>
                    <i class="fa fa-chevron-down text-xs text-dark-gray"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- 操作按钮 -->
            <div class="flex justify-between">
              <button class="px-6 py-2.5 bg-white border border-light-gray rounded-xl ios-transition hover:bg-ultra-light">上一题</button>
              <button class="px-6 py-2.5 bg-primary text-white rounded-xl ios-transition hover:bg-primary/90">下一题</button>
            </div>
          </div>
          
          <!-- 历史记录 -->
          <div>
            <h3 class="font-semibold text-lg mb-4">历史记录</h3>
            <div class="space-y-4">
              <div class="bg-white rounded-2xl shadow-ios p-5 ios-transition hover:shadow-ios-hover">
                <div class="flex justify-between items-start">
                  <div>
                    <h4 class="font-medium">前端开发工程师 - 阿里巴巴</h4>
                    <p class="text-dark-gray text-sm">完成于 昨天 15:30</p>
                  </div>
                  <span class="px-3 py-1 bg-secondary/10 text-secondary text-xs rounded-full">已完成</span>
                </div>
                
                <div class="mt-3 pt-3 border-t border-light-gray/50 flex justify-between items-center">
                  <div>
                    <span class="text-dark font-medium">得分: 85</span>
                    <span class="text-dark-gray text-sm ml-2">良好</span>
                  </div>
                  <button class="text-primary text-sm ios-transition hover:underline">查看详情</button>
                </div>
              </div>
              
              <div class="bg-white rounded-2xl shadow-ios p-5 ios-transition hover:shadow-ios-hover">
                <div class="flex justify-between items-start">
                  <div>
                    <h4 class="font-medium">全栈开发工程师 - 腾讯</h4>
                    <p class="text-dark-gray text-sm">完成于 3天前 09:45</p>
                  </div>
                  <span class="px-3 py-1 bg-secondary/10 text-secondary text-xs rounded-full">已完成</span>
                </div>
                
                <div class="mt-3 pt-3 border-t border-light-gray/50 flex justify-between items-center">
                  <div>
                    <span class="text-dark font-medium">得分: 76</span>
                    <span class="text-dark-gray text-sm ml-2">中等</span>
                  </div>
                  <button class="text-primary text-sm ios-transition hover:underline">查看详情</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 意向单页面 -->
      <div id="favorites-page" class="page hidden">
        <div class="container mx-auto px-4 py-6">
          <h2 class="text-xl font-semibold mb-6">我的意向</h2>
          
          <!-- 意向统计 -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-2xl shadow-ios p-5 text-center">
              <p class="text-dark-gray text-sm mb-1">总意向数</p>
              <p class="text-2xl font-semibold" id="total-favorites">0</p>
            </div>
            
            <div class="bg-white rounded-2xl shadow-ios p-5 text-center">
              <p class="text-dark-gray text-sm mb-1">已投递</p>
              <p class="text-2xl font-semibold text-primary" id="applied-favorites">0</p>
            </div>
            
            <div class="bg-white rounded-2xl shadow-ios p-5 text-center">
              <p class="text-dark-gray text-sm mb-1">面试中</p>
              <p class="text-2xl font-semibold text-warning" id="interviewing-favorites">0</p>
            </div>
            
            <div class="bg-white rounded-2xl shadow-ios p-5 text-center">
              <p class="text-dark-gray text-sm mb-1">已offer</p>
              <p class="text-2xl font-semibold text-secondary" id="offered-favorites">0</p>
            </div>
          </div>
          
          <!-- 意向列表 -->
          <div>
            <div class="flex justify-between items-center mb-4">
              <h3 class="font-semibold text-lg">意向职位</h3>
              <select class="text-sm border-none bg-transparent text-primary ios-transition focus:outline-none">
                <option>最近添加</option>
                <option>薪资高低</option>
                <option>公司名称</option>
              </select>
            </div>
            
            <div class="space-y-4" id="favorites-list">
              <!-- 意向职位将通过JavaScript动态生成 -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- 底部导航栏 -->
  <footer class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-ios border-t border-light-gray/50 z-40">
    <div class="container mx-auto">
      <div class="flex justify-around">
        <button class="nav-item active flex flex-col items-center justify-center py-3 px-4 ios-transition" data-page="jobs-page">
          <i class="fa fa-briefcase text-xl mb-1"></i>
          <span class="text-xs">职位</span>
        </button>
        
        <button class="nav-item flex flex-col items-center justify-center py-3 px-4 ios-transition" data-page="resume-page">
          <i class="fa fa-file-text-o text-xl mb-1"></i>
          <span class="text-xs">简历</span>
        </button>
        
        <button class="nav-item flex flex-col items-center justify-center py-3 px-4 ios-transition" data-page="interview-page">
          <i class="fa fa-comments-o text-xl mb-1"></i>
          <span class="text-xs">面经</span>
        </button>
        
        <button class="nav-item flex flex-col items-center justify-center py-3 px-4 ios-transition" data-page="favorites-page">
          <i class="fa fa-heart-o text-xl mb-1"></i>
          <span class="text-xs">意向</span>
        </button>
      </div>
    </div>
  </footer>
  
  <!-- 悬浮按钮 - 回到顶部 -->
  <button id="back-to-top" class="fixed bottom-20 right-6 w-12 h-12 rounded-full bg-primary text-white shadow-ios flex items-center justify-center ios-transition opacity-0 invisible hover:bg-primary/90">
    <i class="fa fa-chevron-up"></i>
  </button>
  
  <script>
    // 页面导航功能
    document.addEventListener('DOMContentLoaded', function() {
      // 导航项点击事件
      const navItems = document.querySelectorAll('.nav-item');
      const pages = document.querySelectorAll('.page');
      
      navItems.forEach(item => {
        item.addEventListener('click', function() {
          // 移除所有导航项的active类
          navItems.forEach(nav => nav.classList.remove('active', 'text-primary'));
          // 给当前点击的导航项添加active类
          this.classList.add('active', 'text-primary');
          
          // 获取目标页面ID
          const targetPage = this.getAttribute('data-page');
          
          // 隐藏所有页面
          pages.forEach(page => {
            page.classList.add('hidden');
            page.classList.remove('active');
          });
          
          // 显示目标页面
          const activePage = document.getElementById(targetPage);
          activePage.classList.remove('hidden');
          activePage.classList.add('active');
          
          // 滚动到顶部
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      });
      
      // 收藏按钮点击事件
      const favoriteButtons = document.querySelectorAll('.job-favorite');
      favoriteButtons.forEach(button => {
        button.addEventListener('click', function() {
          const icon = this.querySelector('i');
          const jobId = this.getAttribute('data-job-id');
          
          // 切换收藏状态
          if (icon.classList.contains('fa-heart-o')) {
            icon.classList.remove('fa-heart-o', 'text-dark-gray');
            icon.classList.add('fa-heart', 'text-danger');
            
            // 添加动画效果
            this.classList.add('animate-float');
            setTimeout(() => {
              this.classList.remove('animate-float');
            }, 1000);
            
            // 这里可以添加收藏逻辑，如更新状态管理等
            console.log(`收藏职位: ${jobId}`);
          } else {
            icon.classList.remove('fa-heart', 'text-danger');
            icon.classList.add('fa-heart-o', 'text-dark-gray');
            
            // 这里可以添加取消收藏逻辑
            console.log(`取消收藏职位: ${jobId}`);
          }
        });
      });
      
      // 导航栏滚动效果
      const navbar = document.getElementById('navbar');
      let lastScrollTop = 0;
      
      window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        // 导航栏效果
        if (scrollTop > 50) {
          navbar.classList.add('shadow-ios');
        } else {
          navbar.classList.remove('shadow-ios');
        }
        
        // 回到顶部按钮显示/隐藏
        const backToTopBtn = document.getElementById('back-to-top');
        if (scrollTop > 300) {
          backToTopBtn.classList.remove('opacity-0', 'invisible');
          backToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          backToTopBtn.classList.remove('opacity-100', 'visible');
          backToTopBtn.classList.add('opacity-0', 'invisible');
        }
        
        lastScrollTop = scrollTop;
      });
      
      // 回到顶部按钮点击事件
      document.getElementById('back-to-top').addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      
      // 分页状态管理
      let currentPageData = {
        currentPage: 1,
        totalPages: 1,
        totalEntries: 0,
        pageSize: 20,
        allEntries: [],
        originalEntries: []
      };
      
      // 意向管理状态
      let favoritesState = {
        favorites: new Map(), // 存储用户添加的意向职位
        nextId: 1            // 意向职位ID计数器
      };
      
      // 将分页数据对象挂载到window上，供全局函数使用
      window.currentPageData = currentPageData;
      // 将意向状态对象挂载到window上，供全局函数使用
      window.favoritesState = favoritesState;
      
      // 初始化收藏功能
      initFavorites();
      
      // 从Flask API获取真实招聘数据
      async function fetchJobData() {
        try {
          console.log('开始获取API数据...');
          const response = await fetch('https://f24b6d1c5fc6.ngrok-free.app/api/feishu-data');
          const data = await response.json();
          console.log('API数据获取成功:', data);
          
          // 提取职位信息
          const entries = data.data?.records || [];
          console.log('解析到职位条目数量:', entries.length);
          
          // 按发布日期倒序排序（最新的在前）
          const sortedEntries = entries.sort((a, b) => {
            const dateA = new Date(a.fields?.pubDate || 0);
            const dateB = new Date(b.fields?.pubDate || 0);
            return dateB - dateA; // 倒序：最新的在前
          });
          console.log('数据已按发布日期倒序排序');
          
          const jobsContainer = document.querySelector('#jobs-table-body');
          
          if (jobsContainer) {
            jobsContainer.innerHTML = ''; // 清空现有内容
            
            // 保存排序后的数据到全局状态（包括原始数据备份）
            currentPageData.allEntries = sortedEntries;
            currentPageData.originalEntries = [...sortedEntries]; // 备份排序后的数据
            currentPageData.totalEntries = sortedEntries.length;
            currentPageData.totalPages = Math.ceil(sortedEntries.length / currentPageData.pageSize);
            
            console.log('数据已保存，总条目数:', currentPageData.totalEntries, '总页数:', currentPageData.totalPages);
            
            // 显示第一页数据
            goToPage(1);
          } else {
            console.error('找不到职位表格容器');
          }
        } catch (error) {
          console.error('获取招聘数据失败:', error);
          // 如果获取失败，显示默认数据
          showDefaultJobs();
        }
      }
      

      

      

      

      
      // 翻页功能
      function goToPage(pageNumber) {
        console.log('跳转到页面:', pageNumber);
        
        if (pageNumber < 1 || pageNumber > currentPageData.totalPages) {
          console.log('页码无效，当前页数范围: 1-', currentPageData.totalPages);
          return;
        }
        
        const jobsContainer = document.querySelector('#jobs-table-body');
        if (!jobsContainer || currentPageData.allEntries.length === 0) {
          console.log('找不到容器或没有数据');
          return;
        }
        
        // 清空当前内容
        jobsContainer.innerHTML = '';
        
        // 计算当前页的数据范围
        const startIndex = (pageNumber - 1) * currentPageData.pageSize;
        const endIndex = Math.min(startIndex + currentPageData.pageSize, currentPageData.totalEntries);
        
        console.log(`显示第${pageNumber}页数据，范围: ${startIndex}-${endIndex-1}`);
        
        // 显示当前页的数据
        for (let i = startIndex; i < endIndex; i++) {
          const entry = currentPageData.allEntries[i];
          const fields = entry.fields || {};
          
          // 从飞书API字段中提取指定的6个字段，原样展示
          const title = fields.title || '';
          const pubDate = fields.pubDate || '';
          const link = fields.link || ''; // 提取link字段
          
          // 处理AI字段，提取文本内容
          const company = extractTextFromField(fields.company) || '';
          const industry = extractTextFromField(fields.industry) || '';
          const base = extractTextFromField(fields.base) || '';
          const position = extractTextFromField(fields.position) || '';
          
          // 创建职位行
          const jobRow = createJobRow({
            id: `job-${i + 1}`,
            title: title,
            pubDate: pubDate,
            link: link, // 传递link字段
            company: company,
            industry: industry,
            base: base,
            position: position
          });
          
          jobsContainer.appendChild(jobRow);
        }
        
        console.log(`第${pageNumber}页数据渲染完成，共${endIndex - startIndex}条`);
        
        // 更新分页信息
        updatePagination(pageNumber, currentPageData.totalPages, currentPageData.totalEntries);
        
        // 滚动到顶部
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // 更新收藏按钮状态
        setTimeout(updateAllFavoriteButtonStates, 100);
      }
      
      // 页面跳转功能
      function jumpToPage() {
        const pageInput = document.getElementById('page-input');
        const targetPage = parseInt(pageInput.value);
        
        if (isNaN(targetPage) || targetPage < 1 || targetPage > currentPageData.totalPages) {
          alert(`请输入有效的页码 (1-${currentPageData.totalPages})`);
          return;
        }
        
        goToPage(targetPage);
        pageInput.value = ''; // 清空输入框
      }
      
      // 处理页面输入框的回车键
      function handlePageInputKeypress(event) {
        if (event.key === 'Enter') {
          jumpToPage();
        }
      }
      
      // 搜索功能
      function performSearch() {
        const searchInput = document.getElementById('search-input');
        const searchTerm = searchInput.value.toLowerCase().trim();
        
        if (searchTerm === '') {
          // 如果搜索框为空，恢复原始数据
          currentPageData.allEntries = [...currentPageData.originalEntries];
          currentPageData.totalEntries = currentPageData.allEntries.length;
          currentPageData.totalPages = Math.ceil(currentPageData.allEntries.length / currentPageData.pageSize);
          currentPageData.currentPage = 1;
          goToPage(1);
          return;
        }
        
        // 搜索逻辑 - 支持飞书API数据结构
        const filteredEntries = currentPageData.originalEntries.filter(entry => {
          const fields = entry.fields || {};
          
          // 从飞书API字段中提取指定的字段
          const title = fields.title || '';
          const pubDate = fields.pubDate || '';
          const link = fields.link || '';
          
          // 处理AI字段，提取文本内容
          const company = extractTextFromField(fields.company) || '';
          const industry = extractTextFromField(fields.industry) || '';
          const base = extractTextFromField(fields.base) || '';
          const position = extractTextFromField(fields.position) || '';
          
          // 组合搜索：职位标题、链接、公司、行业、基础信息、岗位等
          const searchableText = [
            title.toLowerCase(),
            pubDate.toLowerCase(),
            link.toLowerCase(),
            company.toLowerCase(),
            industry.toLowerCase(),
            base.toLowerCase(),
            position.toLowerCase()
          ].join(' ');
          
          return searchableText.includes(searchTerm);
        });
        
        // 更新分页数据
        currentPageData.allEntries = filteredEntries;
        currentPageData.totalEntries = filteredEntries.length;
        currentPageData.totalPages = Math.ceil(filteredEntries.length / currentPageData.pageSize);
        currentPageData.currentPage = 1;
        
        // 显示搜索结果
        goToPage(1);
      }
      
      // 显示默认职位数据
      function showDefaultJobs() {
        console.log('显示默认职位数据');
        const jobsContainer = document.querySelector('#jobs-table-body');
        if (jobsContainer) {
          jobsContainer.innerHTML = `
            <div class="px-6 py-8 text-center">
              <p class="text-dark-gray">暂无职位数据，请检查数据源连接</p>
            </div>
          `;
        }
      }
      
      // 页面加载完成后获取数据
      console.log('页面加载完成，开始获取职位数据...');
      fetchJobData();
      
      // 初始化自定义筛选功能
      initCustomFilters();
      
      // 添加点击外部关闭下拉菜单的功能
      document.addEventListener('click', function(event) {
        const statusDropdowns = document.querySelectorAll('.status-dropdown');
        statusDropdowns.forEach(dropdown => {
          if (!dropdown.contains(event.target) && !event.target.closest('.status-display')) {
            dropdown.classList.add('hidden');
          }
        });
      });
      
      // 处理岗位和地点悬停菜单
      document.addEventListener('mouseover', function(event) {
        const positionGroup = event.target.closest('.position-group');
        const locationGroup = event.target.closest('.location-group');
        
        // 隐藏所有菜单
        document.querySelectorAll('.position-hover-menu, .location-hover-menu').forEach(menu => {
          menu.classList.add('hidden');
        });
        
        // 显示当前悬停的菜单
        if (positionGroup) {
          const menu = positionGroup.querySelector('.position-hover-menu');
          if (menu) menu.classList.remove('hidden');
        } else if (locationGroup) {
          const menu = locationGroup.querySelector('.location-hover-menu');
          if (menu) menu.classList.remove('hidden');
        }
      });
      
      // 鼠标离开时隐藏菜单
      document.addEventListener('mouseout', function(event) {
        const positionGroup = event.target.closest('.position-group');
        const locationGroup = event.target.closest('.location-group');
        
        if (!positionGroup && !locationGroup) {
          // 如果鼠标离开了所有组，隐藏所有菜单
          setTimeout(() => {
            const hoveredPositionGroup = document.querySelector('.position-group:hover');
            const hoveredLocationGroup = document.querySelector('.location-group:hover');
            
            if (!hoveredPositionGroup && !hoveredLocationGroup) {
              document.querySelectorAll('.position-hover-menu, .location-hover-menu').forEach(menu => {
                menu.classList.add('hidden');
              });
            }
          }, 100);
        }
      });
      
      // 监听页面切换，在职位页面激活时获取数据
      navItems.forEach(item => {
        item.addEventListener('click', function() {
          const targetPage = this.getAttribute('data-page');
          if (targetPage === 'jobs-page') {
            setTimeout(fetchJobData, 100); // 延迟获取数据，确保页面已切换
          } else if (targetPage === 'favorites-page') {
            setTimeout(updateFavoritesDisplay, 100); // 延迟更新意向显示，确保页面已切换
          }
        });
      });
    });
    
    // 全局函数声明，供HTML中的onclick事件调用
    function goToPage(pageNumber) {
      // 直接调用分页功能
      const jobsContainer = document.querySelector('#jobs-table-body');
      if (!jobsContainer || !window.currentPageData || window.currentPageData.allEntries.length === 0) {
        console.log('无法执行分页，数据或容器不存在');
        return;
      }
      
      const pageData = window.currentPageData;
      if (pageNumber < 1 || pageNumber > pageData.totalPages) {
        console.log('页码无效，当前页数范围: 1-', pageData.totalPages);
        return;
      }
      
      // 清空当前内容
      jobsContainer.innerHTML = '';
      
      // 计算当前页的数据范围
      const startIndex = (pageNumber - 1) * pageData.pageSize;
      const endIndex = Math.min(startIndex + pageData.pageSize, pageData.totalEntries);
      
      console.log(`显示第${pageNumber}页数据，范围: ${startIndex}-${endIndex-1}`);
      
      // 显示当前页的数据
      for (let i = startIndex; i < endIndex; i++) {
        const entry = pageData.allEntries[i];
        const fields = entry.fields || {};
        
        // 从飞书API字段中提取指定的6个字段，原样展示
        const title = fields.title || '';
        const pubDate = fields.pubDate || '';
        const link = fields.link || ''; // 提取link字段
        
        // 处理AI字段，提取文本内容
        const company = extractTextFromField(fields.company) || '';
        const industry = extractTextFromField(fields.industry) || '';
        const base = extractTextFromField(fields.base) || '';
        const position = extractTextFromField(fields.position) || '';
        
        // 创建职位行
        const jobRow = createJobRow({
          id: `job-${i + 1}`,
          title: title,
          pubDate: pubDate,
          link: link, // 传递link字段
          company: company,
          industry: industry,
          base: base,
          position: position
        });
        
        jobsContainer.appendChild(jobRow);
      }
      
      console.log(`第${pageNumber}页数据渲染完成，共${endIndex - startIndex}条`);
      
      // 更新分页信息
      updatePagination(pageNumber, pageData.totalPages, pageData.totalEntries);
      
      // 滚动到顶部
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function jumpToPage() {
      const pageInput = document.getElementById('page-input');
      const targetPage = parseInt(pageInput.value);
      
      if (!window.currentPageData) {
        alert('数据未加载，请稍后再试');
        return;
      }
      
      if (isNaN(targetPage) || targetPage < 1 || targetPage > window.currentPageData.totalPages) {
        alert(`请输入有效的页码 (1-${window.currentPageData.totalPages})`);
        return;
      }
      
      goToPage(targetPage);
      pageInput.value = ''; // 清空输入框
    }
    
    function handlePageInputKeypress(event) {
      if (event.key === 'Enter') {
        jumpToPage();
      }
    }
    
    function toggleTags(id) {
      const tagsContainer = document.getElementById(id);
      if (tagsContainer) {
        tagsContainer.classList.toggle('hidden');
      }
    }
    
    function performSearch() {
      const searchInput = document.getElementById('search-input');
      const searchTerm = searchInput.value.toLowerCase().trim();
      
      if (!window.currentPageData) {
        console.log('数据未加载，无法搜索');
        return;
      }
      
      if (searchTerm === '') {
        // 如果搜索框为空，恢复原始数据
        window.currentPageData.allEntries = [...window.currentPageData.originalEntries];
        window.currentPageData.totalEntries = window.currentPageData.allEntries.length;
        window.currentPageData.totalPages = Math.ceil(window.currentPageData.allEntries.length / window.currentPageData.pageSize);
        window.currentPageData.currentPage = 1;
        goToPage(1);
        return;
      }
      
      // 搜索逻辑
      const filteredEntries = window.currentPageData.originalEntries.filter(entry => {
        const fields = entry.fields || {};
        
        // 从飞书API字段中提取指定的字段
        const title = fields.title || '';
        const pubDate = fields.pubDate || '';
        const link = fields.link || '';
        
        // 处理AI字段，提取文本内容
        const company = extractTextFromField(fields.company) || '';
        const industry = extractTextFromField(fields.industry) || '';
        const base = extractTextFromField(fields.base) || '';
        const position = extractTextFromField(fields.position) || '';
        
        // 组合搜索：职位标题、链接、公司名、行业、基础信息、岗位等
        const searchableText = [
          title.toLowerCase(),
          pubDate.toLowerCase(),
          link.toLowerCase(),
          company.toLowerCase(),
          industry.toLowerCase(),
          base.toLowerCase(),
          position.toLowerCase()
        ].join(' ');
        
        return searchableText.includes(searchTerm);
      });
      
      // 更新分页数据
      window.currentPageData.allEntries = filteredEntries;
      window.currentPageData.totalEntries = filteredEntries.length;
      window.currentPageData.totalPages = Math.ceil(filteredEntries.length / window.currentPageData.pageSize);
      window.currentPageData.currentPage = 1;
      
      // 显示搜索结果
      goToPage(1);
    }
    

    

    

    

    

    
    function createJobRow(jobData) {
      const row = document.createElement('div');
      row.className = 'grid grid-cols-8 table-grid px-4 py-4 hover:bg-ultra-light/50 ios-transition group';
      row.style.columnGap = '0.2cm';
      
      // 处理标题链接
      const titleContent = jobData.link ? 
        `<a href="${jobData.link}" target="_blank" class="job-title-link" title="点击查看详情 (新窗口打开)">${jobData.title || '无标题'}</a>` :
        `<span class="hover:text-primary" title="暂无链接">${jobData.title || '无标题'}</span>`;
      
      row.innerHTML = `
        <div class="col-span-2">
          <div class="flex items-start gap-3">
            <div class="flex-1 min-w-0">
              <h3 class="font-semibold text-dark mb-1 group-hover:text-primary ios-transition break-all" title="${jobData.title || ''}">
                ${titleContent}
              </h3>
            </div>
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center gap-1">
            <span class="text-dark text-sm">${formatDate(jobData.pubDate) || '无日期'}</span>
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center gap-1">
            ${createCollapsibleContent(jobData.company || '无公司信息', 'company')}
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center gap-1">
            ${createCollapsibleContent(jobData.industry || '无行业信息', 'industry')}
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center gap-1">
            ${createCollapsibleContent(jobData.base || '无基础信息', 'base')}
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center gap-1">
            ${createCollapsibleContent(jobData.position || '无岗位信息', 'position')}
          </div>
        </div>
        <div class="col-span-1">
          <div class="flex items-center justify-center">
                          <button class="favorite-btn text-lg text-gray-400 hover:text-red-500 ios-transition" 
                      onclick="toggleFavorite(this, '${jobData.title || '无标题'}')" 
                      data-job-id="${jobData.title || '无标题'}"
                      title="点击收藏">
              <i class="fa fa-heart-o"></i>
            </button>
          </div>
        </div>
      `;
      
      return row;
    }
    

    
    function formatDate(dateString) {
      try {
        const date = new Date(dateString);
        const now = new Date();
        const diffTime = now - date;
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        if (diffDays === 0) return '今天';
        if (diffDays === 1) return '昨天';
        if (diffDays > 1 && diffDays <= 7) return `${diffDays}天前`;
        
        return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
      } catch (e) {
        console.error('日期解析错误:', e, dateString);
        return '最近';
      }
    }
    
    function updatePagination(currentPage, totalPages, totalEntries) {
      if (!window.currentPageData) return;
      
      window.currentPageData.currentPage = currentPage;
      window.currentPageData.totalPages = totalPages;
      window.currentPageData.totalEntries = totalEntries;
      
      // 更新分页显示
      const paginationInfo = document.querySelector('.pagination-info');
      if (paginationInfo) {
        paginationInfo.textContent = `第 ${currentPage} 页，共 ${totalPages} 页`;
      }
      
      // 更新分页按钮状态
      updatePaginationButtons(currentPage, totalPages);
    }
    
    function updatePaginationButtons(currentPage, totalPages) {
      const prevBtn = document.querySelector('.prev-page');
      const nextBtn = document.querySelector('.next-page');
      
      if (prevBtn) {
        prevBtn.disabled = currentPage <= 1;
        prevBtn.classList.toggle('opacity-50', currentPage <= 1);
      }
      
      if (nextBtn) {
        nextBtn.disabled = currentPage >= totalPages;
        nextBtn.classList.toggle('opacity-50', currentPage >= totalPages);
      }
    }
    

    
    // 切换筛选标签状态

    

    

    
    // 更新岗位选择
    function updatePositionSelection(jobId, position, isChecked) {
      if (!window.jobSelections) {
        window.jobSelections = new Map();
      }
      
      if (!window.jobSelections.has(jobId)) {
        window.jobSelections.set(jobId, { positions: new Set(), locations: new Set() });
      }
      
      const selections = window.jobSelections.get(jobId);
      
      if (isChecked) {
        selections.positions.add(position);
      } else {
        selections.positions.delete(position);
      }
      
      // 更新标签的选中状态
      const tag = document.querySelector(`[data-job-id="${jobId}"][data-position="${position}"]`);
      if (tag) {
        if (isChecked) {
          tag.classList.add('selected');
        } else {
          tag.classList.remove('selected');
        }
      }
      
      console.log(`职位 ${jobId} 岗位选择更新:`, Array.from(selections.positions));
    }
    
    // 更新地点选择
    function updateLocationSelection(jobId, location, isChecked) {
      if (!window.jobSelections) {
        window.jobSelections = new Map();
      }
      
      if (!window.jobSelections.has(jobId)) {
        window.jobSelections.set(jobId, { positions: new Set(), locations: new Set() });
      }
      
      const selections = window.jobSelections.get(jobId);
      
      if (isChecked) {
        selections.locations.add(location);
      } else {
        selections.locations.delete(location);
      }
      
      // 更新标签的选中状态
      const tag = document.querySelector(`[data-job-id="${jobId}"][data-location="${location}"]`);
      if (tag) {
        if (isChecked) {
          tag.classList.add('selected');
        } else {
          tag.classList.remove('selected');
        }
      }
      
      console.log(`职位 ${jobId} 地点选择更新:`, Array.from(selections.locations));
    }
    
    // 切换意向状态
    function toggleFavorite(button) {
      if (window.favoritesState) {
        const jobId = button.getAttribute('data-job-id');
        const jobTitle = button.getAttribute('data-job-title');
        const jobAuthor = button.getAttribute('data-job-author');
        const jobPosition = button.getAttribute('data-job-position');
        const jobLocation = button.getAttribute('data-job-location');
        const jobUpdated = button.getAttribute('data-job-updated');
        
        if (window.favoritesState.favorites.has(jobId)) {
          // 移除意向
          window.favoritesState.favorites.delete(jobId);
          button.innerHTML = '<i class="fa fa-heart-o text-dark-gray text-lg"></i>';
          button.classList.remove('text-danger');
          console.log(`已移除意向: ${jobTitle}`);
        } else {
          // 获取用户选择的岗位和地点
          const userSelections = window.jobSelections ? window.jobSelections.get(jobId) : null;
          const selectedPositions = userSelections && userSelections.positions.size > 0 ? 
            Array.from(userSelections.positions) : jobPosition.split(',');
          const selectedLocations = userSelections && userSelections.locations.size > 0 ? 
            Array.from(userSelections.locations) : jobLocation.split(',');
          
          // 添加意向
          const favoriteJob = {
            id: jobId,
            title: jobTitle,
            company: button.getAttribute('data-job-company'),
            industry: button.getAttribute('data-job-industry'),
            location: selectedLocations, // 保存用户选择的地点
            recruitmentTarget: button.getAttribute('data-job-recruitment-target'),
            pubDate: button.getAttribute('data-job-pubdate'),
            addedAt: new Date().toISOString(),
            status: '未投递',
            memo: ''
          };
          
          window.favoritesState.favorites.set(jobId, favoriteJob);
          button.innerHTML = '<i class="fa fa-heart text-danger text-lg"></i>';
          button.classList.add('text-danger');
          console.log(`已添加意向: ${jobTitle} (岗位: ${selectedPosition}, 地点: ${selectedLocation})`);
        }
        
        // 更新意向页面显示
        updateFavoritesDisplay();
      }
    }
    
    function removeFavorite(jobId) {
      if (window.favoritesState) {
        window.favoritesState.favorites.delete(jobId);
        
        // 更新职位表格中的心形状态
        const jobButton = document.querySelector(`[data-job-id="${jobId}"]`);
        if (jobButton) {
          jobButton.innerHTML = '<i class="fa fa-heart-o text-dark-gray text-lg"></i>';
          jobButton.classList.remove('text-danger');
        }
        
        updateFavoritesDisplay();
        console.log(`已移除意向职位: ${jobId}`);
      }
    }
    
    // 切换状态下拉菜单
    function toggleStatusDropdown(jobId) {
      const dropdown = document.getElementById(`status-dropdown-${jobId}`);
      if (dropdown) {
        dropdown.classList.toggle('hidden');
      }
    }
    
    // 更新职位状态
    function updateJobStatus(jobId, status) {
      if (window.favoritesState) {
        const job = window.favoritesState.favorites.get(jobId);
        if (job) {
          job.status = status;
          console.log(`已更新职位状态: ${job.title} -> ${status}`);
          
          // 更新显示的状态文本
          const statusDisplay = document.querySelector(`#status-dropdown-${jobId}`).previousElementSibling;
          const statusText = statusDisplay.querySelector('.status-text');
          if (statusText) {
            statusText.textContent = status;
          }
          
          // 关闭下拉菜单
          const dropdown = document.getElementById(`status-dropdown-${jobId}`);
          if (dropdown) {
            dropdown.classList.add('hidden');
          }
          
          // 更新所有状态选项的样式
          const statusOptions = dropdown.querySelectorAll('.status-option');
          statusOptions.forEach(option => {
            option.classList.remove('bg-primary/10', 'text-primary');
            option.classList.add('text-dark');
            
            if (option.textContent.trim() === status) {
              option.classList.remove('text-dark');
              option.classList.add('bg-primary/10', 'text-primary');
            }
          });
        }
      }
    }
    
    function updateJobMemo(jobId, memo) {
      if (window.favoritesState) {
        const job = window.favoritesState.favorites.get(jobId);
        if (job) {
          job.memo = memo;
          console.log(`已更新职位备忘录: ${job.title}`);
        }
      }
    }
    
    function viewJobDetail(jobTitle) {
      // 由于不再有link字段，这里可以显示职位详情或进行其他操作
      console.log(`查看职位详情: ${jobTitle}`);
      alert(`查看职位详情: ${jobTitle}\n\n由于系统更新，链接功能已移除。`);
    }
    
    function searchInterviewExperience(jobTitle) {
      console.log(`搜索面经: ${jobTitle}`);
      // TODO: 实现面经搜索功能
      alert('面经搜索功能开发中...');
    }
    
    function updateFavoritesDisplay() {
      const favoritesList = document.getElementById('favorites-list');
      if (!favoritesList) return;
      
      if (!window.favorites || window.favorites.size === 0) {
        favoritesList.innerHTML = `
          <div class="text-center py-12">
            <div class="text-6xl mb-4">🤍</div>
            <p class="text-dark-gray text-lg mb-2">还没有添加意向职位</p>
            <p class="text-dark-gray text-sm">在职位页面点击心形图标即可添加意向</p>
          </div>
        `;
        
        // 更新统计显示
        updateFavoritesStats();
        return;
      }
      
      favoritesList.innerHTML = '';
      
      // 从收藏的职位ID中获取职位信息
      window.favorites.forEach(jobId => {
        // 从当前页面数据中查找职位信息
        if (window.currentPageData && window.currentPageData.originalEntries) {
          const jobEntry = window.currentPageData.originalEntries.find(entry => 
            entry.fields && entry.fields.title && entry.fields.title === jobId
          );
          
          if (jobEntry) {
            const fields = jobEntry.fields;
            const job = {
              id: jobId,
              title: fields.title || '无标题',
              company: extractTextFromField(fields.company) || '无公司信息',
              industry: extractTextFromField(fields.industry) || '无行业信息',
              base: extractTextFromField(fields.base) || '无基础信息',
              position: extractTextFromField(fields.position) || '无岗位信息',
              pubDate: fields.pubDate || '无日期',
              link: fields.link || '',
              status: '未投递'
            };
            
            const jobCard = createFavoriteJobCard(job);
            favoritesList.appendChild(jobCard);
          }
        }
      });
      
      // 更新统计显示
      updateFavoritesStats();
    }
    
    // 更新意向统计显示
    function updateFavoritesStats() {
      if (!window.favorites) return;
      
      const total = window.favorites.size;
      // 暂时设置为0，因为新收藏系统还没有状态管理
      const applied = 0;
      const interviewing = 0;
      const offered = 0;
      
      // 更新统计数字
      const totalElement = document.getElementById('total-favorites');
      const appliedElement = document.getElementById('applied-favorites');
      const interviewingElement = document.getElementById('interviewing-favorites');
      const offeredElement = document.getElementById('offered-favorites');
      
      if (totalElement) totalElement.textContent = total;
      if (appliedElement) appliedElement.textContent = applied;
      if (interviewingElement) interviewingElement.textContent = interviewing;
      if (offeredElement) offeredElement.textContent = offered;
    }
    
    function createFavoriteJobCard(job) {
      const card = document.createElement('div');
      card.className = 'bg-white rounded-2xl shadow-ios p-5 ios-transition hover:shadow-ios-hover';
      card.innerHTML = `
        <div class="flex justify-between items-start mb-4">
          <div class="flex-1">
            <h4 class="font-semibold text-lg mb-2">${job.title}</h4>
            <p class="text-dark-gray text-sm mb-1">${job.company}</p>
            <p class="text-dark-gray text-xs mb-3">${job.industry}</p>
            <div class="flex flex-wrap gap-2 mb-3">
              <span class="px-2 py-1 bg-ultra-light text-secondary text-xs rounded-full">${job.base}</span>
              <span class="px-2 py-1 bg-ultra-light text-primary text-xs rounded-full">${job.position}</span>
            </div>
          </div>
          <button class="favorite-btn w-10 h-10 rounded-full flex items-center justify-center ios-transition hover:bg-ultra-light text-danger" onclick="removeFavorite('${job.id}')">
            <i class="fa fa-heart text-lg"></i>
          </button>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-dark-gray mb-2">投递情况</label>
          <div class="relative">
            <button class="status-display w-full px-3 py-2 bg-ultra-light text-dark text-sm rounded-lg border border-light-gray ios-transition hover:bg-light-gray/30 flex items-center justify-between" onclick="toggleStatusDropdown('${job.id}')">
              <span class="status-text">${job.status}</span>
              <i class="fa fa-chevron-down text-xs text-dark-gray"></i>
            </button>
            <div id="status-dropdown-${job.id}" class="status-dropdown hidden absolute top-full left-0 right-0 mt-1 bg-white border border-light-gray rounded-lg shadow-ios z-10">
              <div class="p-2 space-y-1">
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '未投递' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '未投递')">未投递</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '已投递' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '已投递')">已投递</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '待笔试' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '待笔试')">待笔试</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '待面试' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '待面试')">待面试</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '面试中' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '面试中')">面试中</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '已offer' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '已offer')">已offer</button>
                <button class="status-option w-full text-left px-3 py-2 text-sm rounded-md hover:bg-ultra-light ${job.status === '已结束' ? 'bg-primary/10 text-primary' : 'text-dark'}" onclick="updateJobStatus('${job.id}', '已结束')">已结束</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-dark-gray mb-2">备忘录</label>
          <textarea class="memo-input w-full px-3 py-2 border border-light-gray rounded-lg text-sm resize-none" 
                    rows="3" 
                    placeholder="添加备注、记录面试问题等..."
                    onchange="updateJobMemo('${job.id}', this.value)">${job.memo || ''}</textarea>
        </div>
        
        <div class="flex flex-wrap gap-3 pt-3 border-t border-light-gray/50">
          <button class="px-3 py-1.5 bg-primary/10 text-primary text-sm rounded-full ios-transition hover:bg-primary/20" 
                  onclick="viewJobDetail('${job.title}')">
            查看详情
          </button
          <button class="px-3 py-1.5 bg-ultra-light text-dark text-sm rounded-full ios-transition hover:bg-light-gray/30" 
                  onclick="searchInterviewExperience('${job.title}')">
            搜索面经
          </button>
        </div>
      `;
      
      return card;
    }
    
    // 创建可折叠的内容
    function createCollapsibleContent(text, fieldType) {
      if (!text || text.length < 80) {
        // 如果内容较短（约2行），直接显示
        return `<span class="text-dark text-sm break-all">${text}</span>`;
      }
      
      // 生成唯一ID
      const uniqueId = `${fieldType}-${Math.random().toString(36).substr(2, 9)}`;
      
      // 截取前80个字符作为预览（约2-3行）
      const preview = text.length > 80 ? text.substring(0, 80) + '...' : text;
      
      return `
        <div class="collapsible-content">
          <div class="content-preview">
            <span class="text-dark text-sm break-all">${preview}</span>
            <button class="expand-btn ml-2 ios-transition" 
                    onclick="toggleContent('${uniqueId}')" 
                    title="展开查看更多">
            </button>
          </div>
          <div id="${uniqueId}" class="content-full hidden">
            <span class="text-dark text-sm break-all">${text}</span>
            <button class="collapse-btn ml-2 ios-transition" 
                    onclick="toggleContent('${uniqueId}')" 
                    title="收起">
            </button>
          </div>
        </div>
      `;
    }
    
    // 切换内容展开/收起
    function toggleContent(elementId) {
      const contentFull = document.getElementById(elementId);
      const contentPreview = contentFull.previousElementSibling;
      
      if (contentFull.classList.contains('hidden')) {
        // 展开
        contentFull.classList.remove('hidden');
        contentPreview.classList.add('hidden');
      } else {
        // 收起
        contentFull.classList.add('hidden');
        contentPreview.classList.remove('hidden');
      }
    }
    
    // 辅助函数：从飞书API字段中提取文本内容
    function extractTextFromField(field) {
      if (!field) return '';
      
      // 如果是字符串，直接返回
      if (typeof field === 'string') return field;
      
      // 如果是数组（AI字段格式），提取text属性
      if (Array.isArray(field)) {
        return field.map(item => item.text || '').join(', ');
      }
      
      // 如果是对象，尝试提取text属性
      if (typeof field === 'object' && field.text) {
        return field.text;
      }
      
      // 其他情况，转换为字符串
      return String(field);
    }
    
    // 自定义筛选功能
    function initCustomFilters() {
      const applyFilterBtn = document.getElementById('apply-custom-filter');
      const clearFilterBtn = document.getElementById('clear-custom-filter');
      const baseFilterInput = document.getElementById('base-filter');
      const positionFilterInput = document.getElementById('position-filter');
      
      if (applyFilterBtn) {
        applyFilterBtn.addEventListener('click', applyCustomFilter);
      }
      
      if (clearFilterBtn) {
        clearFilterBtn.addEventListener('click', clearCustomFilter);
      }
      
      // 支持回车键筛选
      if (baseFilterInput) {
        baseFilterInput.addEventListener('keypress', function(event) {
          if (event.key === 'Enter') {
            applyCustomFilter();
          }
        });
      }
      
      if (positionFilterInput) {
        positionFilterInput.addEventListener('keypress', function(event) {
          if (event.key === 'Enter') {
            applyCustomFilter();
          }
        });
      }
    }
    
    // 应用自定义筛选
    function applyCustomFilter() {
      const baseFilter = document.getElementById('base-filter').value.trim();
      const positionFilter = document.getElementById('position-filter').value.trim();
      
      if (!baseFilter && !positionFilter) {
        // 如果两个筛选条件都为空，恢复原始数据
        if (window.currentPageData) {
          window.currentPageData.allEntries = [...window.currentPageData.originalEntries];
          window.currentPageData.totalEntries = window.currentPageData.allEntries.length;
          window.currentPageData.totalPages = Math.ceil(window.currentPageData.allEntries.length / window.currentPageData.pageSize);
          window.currentPageData.currentPage = 1;
          goToPage(1);
        }
        return;
      }
      
      // 应用筛选条件
      if (window.currentPageData) {
        const filteredEntries = window.currentPageData.originalEntries.filter(entry => {
          const fields = entry.fields || {};
          
          // 提取字段内容
          const base = extractTextFromField(fields.base) || '';
          const position = extractTextFromField(fields.position) || '';
          
          let baseMatch = true;
          let positionMatch = true;
          
          // 检查base筛选条件
          if (baseFilter) {
            baseMatch = base.toLowerCase().includes(baseFilter.toLowerCase());
          }
          
          // 检查position筛选条件
          if (positionFilter) {
            positionMatch = position.toLowerCase().includes(positionFilter.toLowerCase());
          }
          
          // 两个条件都必须满足（如果都有值的话）
          return baseMatch && positionMatch;
        });
        
        // 更新分页数据
        window.currentPageData.allEntries = filteredEntries;
        window.currentPageData.totalEntries = filteredEntries.length;
        window.currentPageData.totalPages = Math.ceil(filteredEntries.length / window.currentPageData.pageSize);
        window.currentPageData.currentPage = 1;
        
        // 显示筛选结果
        goToPage(1);
        
        // 显示筛选结果统计
        const totalOriginal = window.currentPageData.originalEntries.length;
        const totalFiltered = filteredEntries.length;
        console.log(`自定义筛选结果：${totalFiltered}/${totalOriginal} 条职位`);
        
        // 可以在这里添加筛选结果的提示
        if (totalFiltered < totalOriginal) {
          // 显示筛选结果提示
          showFilterResultNotification(`筛选结果：${totalFiltered}/${totalOriginal} 条职位`);
        }
      }
    }
    
    // 清除自定义筛选
    function clearCustomFilter() {
      const baseFilterInput = document.getElementById('base-filter');
      const positionFilterInput = document.getElementById('position-filter');
      
      if (baseFilterInput) baseFilterInput.value = '';
      if (positionFilterInput) positionFilterInput.value = '';
      
      // 恢复原始数据
      if (window.currentPageData) {
        window.currentPageData.allEntries = [...window.currentPageData.originalEntries];
        window.currentPageData.totalEntries = window.currentPageData.allEntries.length;
        window.currentPageData.totalPages = Math.ceil(window.currentPageData.allEntries.length / window.currentPageData.pageSize);
        window.currentPageData.currentPage = 1;
        goToPage(1);
      }
    }
    
    // 显示筛选结果通知
    function showFilterResultNotification(message) {
      // 创建通知元素
      const notification = document.createElement('div');
      notification.className = 'fixed top-20 right-4 bg-primary text-white px-4 py-2 rounded-lg shadow-lg z-50 transform transition-all duration-300';
      notification.textContent = message;
      
      // 添加到页面
      document.body.appendChild(notification);
      
      // 3秒后自动消失
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
    
    // 收藏功能
    function toggleFavorite(button, jobId) {
      // 初始化收藏数据
      if (!window.favorites) {
        window.favorites = new Set();
      }
      
      const isFavorite = window.favorites.has(jobId);
      
      if (isFavorite) {
        // 取消收藏
        window.favorites.delete(jobId);
        button.innerHTML = '<i class="fa fa-heart-o"></i>';
        button.classList.remove('text-red-500');
        button.classList.add('text-gray-400');
        button.title = '点击收藏';
      } else {
        // 添加收藏
        window.favorites.add(jobId);
        button.innerHTML = '<i class="fa fa-heart"></i>';
        button.classList.remove('text-gray-400');
        button.classList.add('text-red-500');
        button.title = '取消收藏';
      }
      
      // 保存到localStorage
      localStorage.setItem('jobseek-favorites', JSON.stringify(Array.from(window.favorites)));
      
      // 更新意向页面显示
      updateFavoritesDisplay();
      
      // 更新当前页面的收藏按钮状态
      updateAllFavoriteButtonStates();
    }
    
    // 初始化收藏状态
    function initFavorites() {
      const savedFavorites = localStorage.getItem('jobseek-favorites');
      if (savedFavorites) {
        window.favorites = new Set(JSON.parse(savedFavorites));
      } else {
        window.favorites = new Set();
      }
    }
    
    // 更新收藏按钮状态
    function updateFavoriteButtonState(button, jobId) {
      if (window.favorites && window.favorites.has(jobId)) {
        button.innerHTML = '<i class="fa fa-heart"></i>';
        button.classList.remove('text-gray-400');
        button.classList.add('text-red-500');
        button.title = '取消收藏';
      } else {
        button.innerHTML = '<i class="fa fa-heart-o"></i>';
        button.classList.remove('text-red-500');
        button.classList.add('text-gray-400');
        button.title = '点击收藏';
      }
    }
    
    // 更新所有收藏按钮状态
    function updateAllFavoriteButtonStates() {
      const favoriteButtons = document.querySelectorAll('.favorite-btn');
      favoriteButtons.forEach(button => {
        const jobId = button.getAttribute('data-job-id');
        if (jobId) {
          updateFavoriteButtonState(button, jobId);
        }
      });
    }
  </script>
</body>
</html>
